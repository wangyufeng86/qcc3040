<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Public API: Peer Find Role Service (LE)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Public API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__peer__find__role.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Peer Find Role Service (LE)<div class="ingroups"><a class="el" href="group__services.html">Services</a> &raquo; <a class="el" href="group__peer__service.html">Peer Service</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Peer service for finding peer using LE and selecting the role.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga11752c9d5c8819b1e8e3c15debb22bfb"><td class="memItemLeft" align="right" valign="top">typedef uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga11752c9d5c8819b1e8e3c15debb22bfb">peer_find_role_score_t</a></td></tr>
<tr class="separator:ga11752c9d5c8819b1e8e3c15debb22bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gae164c9c3d9afc4d01c1e5bac46deb03b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#gae164c9c3d9afc4d01c1e5bac46deb03b">peer_find_role_fixed_role_t</a> </td></tr>
<tr class="separator:gae164c9c3d9afc4d01c1e5bac46deb03b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga492e360b917f2b795af08c3dbf8812fb"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga492e360b917f2b795af08c3dbf8812fb">peer_find_role_message_t</a> { <br />
&#160;&#160;<a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fbaafba1079988f2064261bb074f1b01a20">PEER_FIND_ROLE_NO_PEER</a> = PEER_FIND_ROLE_MESSAGE_BASE, 
<a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fba1f59a389b606b714fbebc0b222c263c3">PEER_FIND_ROLE_CANCELLED</a>, 
<a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fbad2afc49bef943d9cf5a0ea24fed65356">PEER_FIND_ROLE_ACTING_PRIMARY</a>, 
<a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fbae50ef324d61254faba6d0a938fe6ac44">PEER_FIND_ROLE_PRIMARY</a>, 
<br />
&#160;&#160;<a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fbab0cb541e0614369ecb1bf02fa98d99bc">PEER_FIND_ROLE_SECONDARY</a>, 
<a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fba087b0781baf6eb135067d18f5824ea13">PEER_FIND_ROLE_PREPARE_FOR_ROLE_SELECTION</a>
<br />
 }</td></tr>
<tr class="separator:ga492e360b917f2b795af08c3dbf8812fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga80dd537e280595214e10e7991eb030fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__peer__find__role.html#ga11752c9d5c8819b1e8e3c15debb22bfb">peer_find_role_score_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga80dd537e280595214e10e7991eb030fe">PeerFindRole_CurrentScore</a> (void)</td></tr>
<tr class="separator:ga80dd537e280595214e10e7991eb030fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ee35026a4076dc7c780c657fcbbcfdb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga8ee35026a4076dc7c780c657fcbbcfdb">PeerFindRole_DisableScanning</a> (bool disable)</td></tr>
<tr class="separator:ga8ee35026a4076dc7c780c657fcbbcfdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac424dccc6a2cb5209adbb8c254aeb200"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#gac424dccc6a2cb5209adbb8c254aeb200">PeerFindRole_FindRole</a> (int32 high_speed_time_ms)</td></tr>
<tr class="separator:gac424dccc6a2cb5209adbb8c254aeb200"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8afc8f2fb6dd7b1dda305cf1078c8b58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga8afc8f2fb6dd7b1dda305cf1078c8b58">PeerFindRole_FindRoleCancel</a> (void)</td></tr>
<tr class="separator:ga8afc8f2fb6dd7b1dda305cf1078c8b58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06c8635d1149599cb534506bf8ec05df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__peer__find__role.html#gae164c9c3d9afc4d01c1e5bac46deb03b">peer_find_role_fixed_role_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga06c8635d1149599cb534506bf8ec05df">PeerFindRole_GetFixedRole</a> (void)</td></tr>
<tr class="memdesc:ga06c8635d1149599cb534506bf8ec05df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query if a fixed role has been assigned to the device.  <a href="#ga06c8635d1149599cb534506bf8ec05df">More...</a><br /></td></tr>
<tr class="separator:ga06c8635d1149599cb534506bf8ec05df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34df36fdfda15c0e555f3ae387a8fe0e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga34df36fdfda15c0e555f3ae387a8fe0e">PeerFindRole_HandleConnectionLibraryMessages</a> (MessageId id, Message message, bool already_handled)</td></tr>
<tr class="separator:ga34df36fdfda15c0e555f3ae387a8fe0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d6add696421a917c984852184cd02de"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga5d6add696421a917c984852184cd02de">PeerFindRole_Init</a> (Task init_task)</td></tr>
<tr class="memdesc:ga5d6add696421a917c984852184cd02de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the PEER FIND ROLE component.  <a href="#ga5d6add696421a917c984852184cd02de">More...</a><br /></td></tr>
<tr class="separator:ga5d6add696421a917c984852184cd02de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25638e76a728393109e9ce815f8911ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga25638e76a728393109e9ce815f8911ae">PeerFindRole_PrepareResponse</a> (void)</td></tr>
<tr class="memdesc:ga25638e76a728393109e9ce815f8911ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Respond to a PREPARE request.  <a href="#ga25638e76a728393109e9ce815f8911ae">More...</a><br /></td></tr>
<tr class="separator:ga25638e76a728393109e9ce815f8911ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26c7c36287245f05b846db44f2997f5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga26c7c36287245f05b846db44f2997f5c">PeerFindRole_RegisterPrepareClient</a> (Task task)</td></tr>
<tr class="memdesc:ga26c7c36287245f05b846db44f2997f5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a client task to receive PREPARE_FOR_ROLE_SELECTION indications.  <a href="#ga26c7c36287245f05b846db44f2997f5c">More...</a><br /></td></tr>
<tr class="separator:ga26c7c36287245f05b846db44f2997f5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27cc45eb89e9321917237ccf1cb8f73a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga27cc45eb89e9321917237ccf1cb8f73a">PeerFindRole_RegisterTask</a> (Task t)</td></tr>
<tr class="separator:ga27cc45eb89e9321917237ccf1cb8f73a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92d85d634f4b739723e1885010fdb878"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga92d85d634f4b739723e1885010fdb878">PeerFindRole_SetFixedRole</a> (<a class="el" href="group__peer__find__role.html#gae164c9c3d9afc4d01c1e5bac46deb03b">peer_find_role_fixed_role_t</a> role)</td></tr>
<tr class="memdesc:ga92d85d634f4b739723e1885010fdb878"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assign a fixed role to the device or enable role switching. The device should be reset after changing this setting.  <a href="#ga92d85d634f4b739723e1885010fdb878">More...</a><br /></td></tr>
<tr class="separator:ga92d85d634f4b739723e1885010fdb878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb581fb4db0302ceecf473d921ad8594"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#gafb581fb4db0302ceecf473d921ad8594">PeerFindRole_UnregisterPrepareClient</a> (Task task)</td></tr>
<tr class="memdesc:gafb581fb4db0302ceecf473d921ad8594"><td class="mdescLeft">&#160;</td><td class="mdescRight">Un-register a client task to receive PREPARE_FOR_ROLE_SELECTION indications.  <a href="#gafb581fb4db0302ceecf473d921ad8594">More...</a><br /></td></tr>
<tr class="separator:gafb581fb4db0302ceecf473d921ad8594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77b168fd78ffa34a200fa5a7cd66c045"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__peer__find__role.html#ga77b168fd78ffa34a200fa5a7cd66c045">PeerFindRole_UnregisterTask</a> (Task t)</td></tr>
<tr class="separator:ga77b168fd78ffa34a200fa5a7cd66c045"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Peer service for finding peer using LE and selecting the role. </p>
<p>The peer find role service is responsible for finding a peer device, and determining the roles each device should take based on the state of the devices.</p>
<p>The service is started by a call to <a class="el" href="group__peer__find__role.html#gac424dccc6a2cb5209adbb8c254aeb200">PeerFindRole_FindRole()</a>. The service then continues until a peer device is detected and a role selected. A timeout can be supplied in the initial call to <a class="el" href="group__peer__find__role.html#gac424dccc6a2cb5209adbb8c254aeb200">PeerFindRole_FindRole()</a>. When this timeout expires a <a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fbad2afc49bef943d9cf5a0ea24fed65356">PEER_FIND_ROLE_ACTING_PRIMARY</a> message is sent to the registered tasks, but the service continues looking for a role.</p>
<p>The service operates by scanning for devices and also advertising its presence, normally simultaneously. Exceptions to this are </p><ul>
<li>After a connection failure the start of advertising is delayed. If the failure was caused by the two devices connecting to each other at the same time, this should ensure that only one is advertising initially. </li>
<li>If a device is busy with media, either music or a telephone call then the device will not scan. This means that if both devices are busy, perhaps connected to different devices, they will not be able to connect to each other until one stops.</li>
</ul>
<p>Once devices are discovered and a connection made, the role is determined by comparison of a figure of merit provided by the GATT role selection service. This allows a decision to be made and one device is told to assume the primary role with the message <a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fbae50ef324d61254faba6d0a938fe6ac44">PEER_FIND_ROLE_PRIMARY</a>, while the other will be told <a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fbab0cb541e0614369ecb1bf02fa98d99bc">PEER_FIND_ROLE_SECONDARY</a>.</p>
<dl class="section note"><dt>Note</dt><dd>After sending a <a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fbae50ef324d61254faba6d0a938fe6ac44">PEER_FIND_ROLE_PRIMARY</a> message, the find role procedure will continue, advertising only. This will be stopped by either a call to <a class="el" href="group__peer__find__role.html#ga8afc8f2fb6dd7b1dda305cf1078c8b58">PeerFindRole_FindRoleCancel()</a> or <a class="el" href="group__peer__find__role.html#gac424dccc6a2cb5209adbb8c254aeb200">PeerFindRole_FindRole()</a>.</dd></dl>
<p>For more comprehensive details of the implementation look at the state machine documentation below (state transitions).</p>
<p>As part of the implementation internal messages are sometimes sent delayed, offering the chance for them to be cancelled, or using condition flags so that messages are sent when all activities blocking them have finished. See the media_busy element of <a class="el" href="structpeer_find_role_task_data.html">peerFindRoleTaskData</a> as an example.</p>
<h2>State transitions</h2>
<p>The LE peer find role service uses a state variable to record its current status see #PEER_FIND_ROLE_STATE for state names. The use of the state allows the processing of messages and function calls to check what action is required, or error to generate.</p>
<p>The state is set using the function peer_find_role_set_state(). This function can trigger actions based on the state that has been entered (or exited).</p>
<p>The basics of the state are documented in the diagram below.</p>
<div class="plantumlgraph">
<img src="inline_umlgraph_5.png" />
</div>
 <h2 class="groupheader">Typedef Documentation</h2>
<a id="ga11752c9d5c8819b1e8e3c15debb22bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11752c9d5c8819b1e8e3c15debb22bfb">&#9670;&nbsp;</a></span>peer_find_role_score_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16 <a class="el" href="group__peer__find__role.html#ga11752c9d5c8819b1e8e3c15debb22bfb">peer_find_role_score_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>
<p>Type representing the score for one of the two peers.</p>
<p>The scores are compared to determine the device best suited to be primary. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gae164c9c3d9afc4d01c1e5bac46deb03b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae164c9c3d9afc4d01c1e5bac46deb03b">&#9670;&nbsp;</a></span>peer_find_role_fixed_role_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__peer__find__role.html#gae164c9c3d9afc4d01c1e5bac46deb03b">peer_find_role_fixed_role_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>
<p>Type representing the setting of a fixed role for the device. </p>

</div>
</div>
<a id="ga492e360b917f2b795af08c3dbf8812fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga492e360b917f2b795af08c3dbf8812fb">&#9670;&nbsp;</a></span>peer_find_role_message_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__peer__find__role.html#ga492e360b917f2b795af08c3dbf8812fb">peer_find_role_message_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>
<p>Messages that may be sent externally by the peer find role service </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga492e360b917f2b795af08c3dbf8812fbaafba1079988f2064261bb074f1b01a20"></a>PEER_FIND_ROLE_NO_PEER&#160;</td><td class="fielddoc"><p>There is no known peer </p>
</td></tr>
<tr><td class="fieldname"><a id="gga492e360b917f2b795af08c3dbf8812fba1f59a389b606b714fbebc0b222c263c3"></a>PEER_FIND_ROLE_CANCELLED&#160;</td><td class="fielddoc"><p>The process of finding peer/deciding role has been cancelled </p>
</td></tr>
<tr><td class="fieldname"><a id="gga492e360b917f2b795af08c3dbf8812fbad2afc49bef943d9cf5a0ea24fed65356"></a>PEER_FIND_ROLE_ACTING_PRIMARY&#160;</td><td class="fielddoc"><p>Did not determine a role within the initial timeout from PeerFindRole_FindRole. May continue trying to find a role, see the API definition for <a class="el" href="group__peer__find__role.html#gac424dccc6a2cb5209adbb8c254aeb200">PeerFindRole_FindRole()</a>. Recommended that device acts as a primary. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga492e360b917f2b795af08c3dbf8812fbae50ef324d61254faba6d0a938fe6ac44"></a>PEER_FIND_ROLE_PRIMARY&#160;</td><td class="fielddoc"><p>Negotiation with peer has selected the primary role for this device </p>
</td></tr>
<tr><td class="fieldname"><a id="gga492e360b917f2b795af08c3dbf8812fbab0cb541e0614369ecb1bf02fa98d99bc"></a>PEER_FIND_ROLE_SECONDARY&#160;</td><td class="fielddoc"><p>Negotiation with peer has selected the secondary role for this device </p>
</td></tr>
<tr><td class="fieldname"><a id="gga492e360b917f2b795af08c3dbf8812fba087b0781baf6eb135067d18f5824ea13"></a>PEER_FIND_ROLE_PREPARE_FOR_ROLE_SELECTION&#160;</td><td class="fielddoc"><p>Request for the application to prepare for role selection. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga80dd537e280595214e10e7991eb030fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga80dd537e280595214e10e7991eb030fe">&#9670;&nbsp;</a></span>PeerFindRole_CurrentScore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__peer__find__role.html#ga11752c9d5c8819b1e8e3c15debb22bfb">peer_find_role_score_t</a> PeerFindRole_CurrentScore </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>
<p>Generate and return our current score</p>
<dl class="section return"><dt>Returns</dt><dd>The current score that would be used as part of the role calculations. </dd></dl>

</div>
</div>
<a id="ga8ee35026a4076dc7c780c657fcbbcfdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8ee35026a4076dc7c780c657fcbbcfdb">&#9670;&nbsp;</a></span>PeerFindRole_DisableScanning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeerFindRole_DisableScanning </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>disable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>
<p>Stop find role from performing LE scans</p>
<p>This function will stop the find role service using LE scan.</p>
<p>A call with disable TRUE must be matched with a call with disable FALSE. The function may be called with disable FALSE multiple times.</p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>The use of this function should not be needed. Instead the Topology functionality should be disabling LE scan around any activities that may have contention. </dd></dl>

</div>
</div>
<a id="gac424dccc6a2cb5209adbb8c254aeb200"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac424dccc6a2cb5209adbb8c254aeb200">&#9670;&nbsp;</a></span>PeerFindRole_FindRole()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeerFindRole_FindRole </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>high_speed_time_ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>
<p>Start the process of finding the required role from a peer</p>
<p>Assumed pre-requisite is that the peer is missing and has no connection over BREDR or LE.</p>
<p>Messages are sent based on the outcome PEER_FIND_ROLE_NO_PEER PEER_FIND_ROLE_CANCELLED PEER_FIND_ROLE_ACTING_PRIMARY PEER_FIND_ROLE_PRIMARY PEER_FIND_ROLE_SECONDARY</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">high_speed_time_ms</td><td>Specify the time to attempt to find a peer at higher duty cycles. After this time the service will reduce the rate a which a peer is looked for, but will continue to look. After this initial time the message PEER_FIND_ROLE_ACTING_PRIMARY will be sent. If a time of 0ms is supplied, then the service will never use higher duty cycle or send a PEER_FIND_ROLE_ACTING_PRIMARY message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Supplying a negative time to high_speed_time_ms will finish the find role attempt on the timeout. The message PEER_FIND_ROLE_ACTING_PRIMARY will not be sent until advertising and scanning has terminated.</dd>
<dd>
When function is called again before the outcome message is sent, then it will panic. If a client wants to start a new find role it must cancel the in-progress find role by calling <a class="el" href="group__peer__find__role.html#ga8afc8f2fb6dd7b1dda305cf1078c8b58">PeerFindRole_FindRoleCancel</a> first. </dd></dl>

</div>
</div>
<a id="ga8afc8f2fb6dd7b1dda305cf1078c8b58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8afc8f2fb6dd7b1dda305cf1078c8b58">&#9670;&nbsp;</a></span>PeerFindRole_FindRoleCancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeerFindRole_FindRoleCancel </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>
<p>Cancel a previous find role</p>
<p>The current FindRole will complete. If it was successfully cancelled then a <a class="el" href="group__peer__find__role.html#gga492e360b917f2b795af08c3dbf8812fba1f59a389b606b714fbebc0b222c263c3">PEER_FIND_ROLE_CANCELLED</a> message will be sent.</p>
<p>The FindRole may still complete with a role or timeout message. </p>

</div>
</div>
<a id="ga06c8635d1149599cb534506bf8ec05df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06c8635d1149599cb534506bf8ec05df">&#9670;&nbsp;</a></span>PeerFindRole_GetFixedRole()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__peer__find__role.html#gae164c9c3d9afc4d01c1e5bac46deb03b">peer_find_role_fixed_role_t</a> PeerFindRole_GetFixedRole </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>

<p>Query if a fixed role has been assigned to the device. </p>
<dl class="section return"><dt>Returns</dt><dd>The current role assigend to this device or peer_find_role_fixed_role_not_set if role switching is allowed</dd>
<dd>
The current role assigend to this device or peer_find_role_fixed_role_not_set if role switching is allowed The device should be reset after changing this setting </dd></dl>

</div>
</div>
<a id="ga34df36fdfda15c0e555f3ae387a8fe0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga34df36fdfda15c0e555f3ae387a8fe0e">&#9670;&nbsp;</a></span>PeerFindRole_HandleConnectionLibraryMessages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PeerFindRole_HandleConnectionLibraryMessages </td>
          <td>(</td>
          <td class="paramtype">MessageId&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Message&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>already_handled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>
<p>Handler for connection library messages</p>
<p>This function needs to be called by the task that is registered for connection library messages, as the majority of these are sent to a single registered task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">id</td><td>The identifier of the connection library message </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>Pointer to the message content. Can be NULL. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">already_handled</td><td>Flag indicating if another task has already dealt with this message</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the handler has dealt with the message, FALSE otherwise </dd></dl>

</div>
</div>
<a id="ga5d6add696421a917c984852184cd02de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5d6add696421a917c984852184cd02de">&#9670;&nbsp;</a></span>PeerFindRole_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PeerFindRole_Init </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>init_task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>

<p>Initialise the PEER FIND ROLE component. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">init_task</td><td>Task to send init completion message (if any) to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE </dd></dl>

</div>
</div>
<a id="ga25638e76a728393109e9ce815f8911ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga25638e76a728393109e9ce815f8911ae">&#9670;&nbsp;</a></span>PeerFindRole_PrepareResponse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeerFindRole_PrepareResponse </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>

<p>Respond to a PREPARE request. </p>
<p>Called by the application in response to a PREPARE_FOR_ROLE_SELECTION request when it is in a state that will allow reliable role selection.</p>
<p>For example the application must not be discoverable, pairing or connecting to a handset. </p>

</div>
</div>
<a id="ga26c7c36287245f05b846db44f2997f5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26c7c36287245f05b846db44f2997f5c">&#9670;&nbsp;</a></span>PeerFindRole_RegisterPrepareClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeerFindRole_RegisterPrepareClient </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>

<p>Register a client task to receive PREPARE_FOR_ROLE_SELECTION indications. </p>
<p>Currently only one PREPARE_FOR_ROLE_SELECTION client is supported.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Client task to register. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga27cc45eb89e9321917237ccf1cb8f73a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga27cc45eb89e9321917237ccf1cb8f73a">&#9670;&nbsp;</a></span>PeerFindRole_RegisterTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeerFindRole_RegisterTask </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>
<p>Register a task to receive messages related to the role</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>The task being registered </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga92d85d634f4b739723e1885010fdb878"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga92d85d634f4b739723e1885010fdb878">&#9670;&nbsp;</a></span>PeerFindRole_SetFixedRole()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeerFindRole_SetFixedRole </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__peer__find__role.html#gae164c9c3d9afc4d01c1e5bac46deb03b">peer_find_role_fixed_role_t</a>&#160;</td>
          <td class="paramname"><em>role</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>

<p>Assign a fixed role to the device or enable role switching. The device should be reset after changing this setting. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">role</td><td>emum representing role behaviour the device is to adopt.</td></tr>
  </table>
  </dd>
</dl>
<p>Assign a fixed role to the device or enable role switching. The device should be reset after changing this setting.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">role</td><td>emum representing role behaviour the device is to adopt </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gafb581fb4db0302ceecf473d921ad8594"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafb581fb4db0302ceecf473d921ad8594">&#9670;&nbsp;</a></span>PeerFindRole_UnregisterPrepareClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeerFindRole_UnregisterPrepareClient </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>

<p>Un-register a client task to receive PREPARE_FOR_ROLE_SELECTION indications. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Client task to un-register. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga77b168fd78ffa34a200fa5a7cd66c045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga77b168fd78ffa34a200fa5a7cd66c045">&#9670;&nbsp;</a></span>PeerFindRole_UnregisterTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeerFindRole_UnregisterTask </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;adk/src/services/peer/peer_find_role/peer_find_role.h&gt;</code></p>
<p>Un-register a task to receive messages related to the role</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>The task being un-registered </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
